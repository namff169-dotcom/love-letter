:root {
  --pink-main:  #FC8EAC;   /* hồng chủ đạo */
  --pink-light: #FFE6EC;   /* nền nhẹ */
  --pink-hot:   #FF5C8A;   /* nhấn (button, tim) */
  --cream:      #FFF1F5;   /* nền phụ */
  --text-dark:  #3A3A3A;   /* chữ */
}

* { box-sizing: border-box; }
html,body { height:100%; margin:0; font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; color:var(--text-dark); background: #f6f2f4; }

.stage { display:flex; align-items:center; justify-content:center; height:100vh; }
.phone { width:390px; height:844px; border-radius:34px; background: linear-gradient(180deg, var(--cream), var(--pink-light)); position:relative; box-shadow:0 20px 40px rgba(0,0,0,0.15); overflow:hidden; border: 6px solid #fff; }
.notch { position:absolute; left:50%; transform:translateX(-50%); top:6px; width:210px; height:34px; background:#000; border-radius:0 0 20px 20px; opacity:0.08; }

.screen { padding:24px 18px; height:100%; display:flex; align-items:center; justify-content:center; }
.page { display:none; width:100%; max-width:334px; gap:12px; }
.page.active { display:flex; flex-direction:column; align-items:center; justify-content:center; }

.title { margin:0 0 16px 0; text-align:center; color:var(--pink-main); }

.login-card { background: #fff; border-radius:14px; padding:18px; box-shadow:0 6px 16px rgba(0,0,0,0.06); }
.keypad-card { width:100%; display:flex; flex-direction:column; align-items:center; }
.pin-display { height:42px; width:100%; border-radius:10px; background:#fff8fb; border:1px dashed #ffd6e6; display:flex; align-items:center; justify-content:center; font-size:22px; letter-spacing:8px; }
.pin-display .dot { display:inline-block; width:10px; height:10px; background:var(--text-dark); border-radius:50%; margin:0 6px; }
.keypad { width:100%; margin-top:12px; display:grid; grid-template-columns:repeat(3,1fr); gap:10px; }
.keypad .key { padding:14px 6px; border-radius:10px; background:#fff; border:1px solid #ffe9f0; font-size:18px; font-weight:700; color:var(--text-dark); cursor:pointer; box-shadow:0 6px 14px rgba(0,0,0,0.03); }
.keypad .key-action { background: linear-gradient(180deg,#fff 0%, #ffe6ef 100%); color:var(--pink-hot); }

.btn-secondary { background:#fff; color:var(--pink-hot); border:1px solid #ffd6e6; }
.login-card label { display:block; margin-bottom:8px; font-size:14px; }
.login-card input { width:100%; padding:10px 12px; border-radius:10px; border:1px solid #eee; margin-bottom:12px; }
.btn { background:var(--pink-main); color:#fff; border:none; padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:600; }
.btn:disabled { opacity:0.5; cursor:not-allowed; }
.hint { font-size:13px; color:#777; margin-top:8px; }
.error { color:#b00020; font-size:13px; height:18px; }

.envelope-wrap { display:flex; flex-direction:column; align-items:center; gap:12px; margin-top:32px; }
.envelope-wrap { display:flex; flex-direction:column; align-items:center; gap:12px; margin-top:32px; position:relative; }
.envelope { width:220px; height:140px; position:relative; cursor:pointer; perspective:800px; z-index:1; }
.envelope .body { position:absolute; left:0; right:0; bottom:0; top:0; background:linear-gradient(180deg,#fff 0%, #ffeef4 100%); border-radius:8px; box-shadow:0 6px 14px rgba(0,0,0,0.08); }
.envelope .flap { position:absolute; left:0; right:0; top:0; height:60%; background:linear-gradient(180deg,#FC8EAC 0%, #FFB1C2 100%); border-radius:8px 8px 0 0; transform-origin:top center; transition: transform 600ms cubic-bezier(.2,.9,.3,1); }
.envelope.closed .flap { transform:rotateX(0deg); }
.envelope.open .flap { transform:rotateX(-180deg); }

.letter { width:200px; height:220px; background:#fff; border-radius:8px; box-shadow:0 8px 20px rgba(0,0,0,0.12); display:flex; align-items:center; justify-content:center; position:absolute; bottom:60px; z-index:50; }
.letter.hidden { opacity:0; transform:translateY(12px) scale(0.98); transition:all 420ms ease; pointer-events:none; }
.letter.show { opacity:1; transform:translateY(0) scale(1); pointer-events:auto; }
.letter.pull { animation: pullOut 520ms cubic-bezier(.2,.8,.2,1) forwards; }
.letter-inner { padding:16px; overflow:hidden; display:flex; flex-direction:column; align-items:center; gap:12px; }
.typed { min-height:120px; color:var(--text-dark); font-size:14px; line-height:1.4; }
/* center the next button inside the letter */
.letter-inner .btn { margin: 6px auto 0 auto; }

.envelope .flap { z-index:2; }

.camera-wrap { display:flex; flex-direction:column; gap:10px; align-items:center; width:100%;
  background: linear-gradient(180deg, #ffffff, var(--pink-light));
  border-radius:14px; padding:12px; border:1px solid rgba(255,92,138,0.12); box-shadow:0 8px 20px rgba(0,0,0,0.06);
}
video { display:block; width:100%; max-height:220px; border-radius:12px; background:#000; margin:0 auto; }
/* removed large preview image styles — camera shows live video + thumbnails only */
.controls { display:flex; gap:8px; margin-top:8px; }
.file-btn { position:relative; overflow:hidden; }
.file-btn input[type=file] { position:absolute; inset:0; opacity:0; cursor:pointer; }
  .counter { font-size:14px; color:#555; margin-top:6px; }
  .thumbs { display:flex; gap:8px; flex-wrap:wrap; margin-top:8px; justify-content:center; }
  /* thumbnail item with badge */
  .thumb-item { position:relative; width:72px; height:72px; }
  .thumb-item img { width:100%; height:100%; object-fit:cover; border-radius:8px; border:2px solid #fff; box-shadow:0 4px 8px rgba(0,0,0,0.08); display:block; }
  .thumb-item .badge { position:absolute; right:6px; bottom:4px; background:#fff; color:var(--pink-hot); font-weight:700; padding:2px 6px; border-radius:12px; font-size:12px; box-shadow:0 2px 6px rgba(0,0,0,0.06); }
  .thumb-item.latest img { outline: 3px solid rgba(255,92,138,0.28); }
.camera-actions { margin-top:12px; }

.cards { width:100%; display:flex; justify-content:center; gap:8px; margin-top:8px; }
.card.locked { animation: shake 320ms ease; }

.assign-area { display:flex; }
.assign-thumb { width:40px; height:40px; border-radius:6px; border:2px solid #fff; box-shadow:0 4px 8px rgba(0,0,0,0.06); }
.assign-thumbs { display:flex; justify-content:center; gap:8px; margin-top:12px; }

@keyframes shake {
  0% { transform: translateX(0); }
  20% { transform: translateX(-6px); }
  60% { transform: translateX(6px); }
  100% { transform: translateX(0); }
}
.card { width:92px; height:140px; perspective:900px; flex:0 0 92px; margin:0; z-index:1; }
.cards .card:nth-child(2) { z-index:4; transform: translateY(-6px); }
.cards .card:nth-child(1), .cards .card:nth-child(3) { z-index:2; transform: translateY(0); }

/* flip page title sizing to match login title */
#page-flip .title { font-size:20px; font-weight:700; }
.card-inner { width:100%; height:100%; transition: transform 600ms; transform-style: preserve-3d; position:relative; cursor:pointer; }
.card.flipped .card-inner { transform: rotateY(180deg); }
.card-face { position:absolute; inset:0; backface-visibility: hidden; border-radius:8px; display:flex; align-items:center; justify-content:center; }
.card-front { background: linear-gradient(180deg, var(--pink-main), var(--pink-hot)); color:#fff; }
.card-back { background: #fff; transform: rotateY(180deg); color:var(--text-dark); border:1px solid #eee; }

/* when a card is flipped, lift it visually so it stands out */
.card { transition: transform 300ms cubic-bezier(.2,.9,.3,1), box-shadow 220ms; }
.card.flipped { transform: translateY(-16px); z-index:12; box-shadow:0 14px 30px rgba(0,0,0,0.18); }

@keyframes pullOut {
  0% { transform: translateY(12px) scale(0.98); opacity:0; }
  60% { transform: translateY(-40px) scale(1.02); opacity:1; }
  100% { transform: translateY(-8px) scale(1); opacity:1; }
}

.muted { color:#666; font-size:13px; }

#flip-info { text-align:center; margin:6px 0 8px; font-size:14px; color:#666; }

/* small responsive */
@media (max-width:420px) { .phone { transform:scale(0.95); } }
